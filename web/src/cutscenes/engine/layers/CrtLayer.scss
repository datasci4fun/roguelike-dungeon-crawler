/**
 * CrtLayer - Retro CRT monitor effects
 */

$black: #000;

@mixin absolute-fill {
  position: absolute;
  inset: 0;
}

// ============================================
// BASE
// ============================================
.crt-layer {
  @include absolute-fill;
  pointer-events: none;
  z-index: 200;
}

// ============================================
// SCANLINES
// ============================================
.crt-scanlines {
  @include absolute-fill;
  background: repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 1px,
    rgba($black, 0.04) 1px,
    rgba($black, 0.04) 2px
  );
}

// ============================================
// VIGNETTE
// ============================================
.crt-vignette {
  @include absolute-fill;
  background: radial-gradient(
    ellipse at center,
    transparent 50%,
    rgba($black, 0.4) 100%
  );
}

// ============================================
// SCREEN GLOW
// ============================================
.crt-glow {
  @include absolute-fill;
  background: radial-gradient(
    ellipse at center,
    transparent 0%,
    rgba(0, 0, 30, 0.08) 100%
  );
}

// ============================================
// FLICKER
// ============================================
.crt-flicker {
  @include absolute-fill;
  animation: crtFlicker 8s ease-in-out infinite;
  background: transparent;
}

@keyframes crtFlicker {
  0%, 90%, 93%, 96%, 100% { opacity: 0; }
  91% { opacity: 0.02; background: rgba(255, 255, 255, 0.02); }
  94% { opacity: 0.01; background: rgba(255, 255, 255, 0.01); }
}

// ============================================
// INTENSITY: LIGHT
// ============================================
.crt-light {
  .crt-scanlines {
    background: repeating-linear-gradient(
      0deg,
      transparent 0px,
      transparent 2px,
      rgba($black, 0.02) 2px,
      rgba($black, 0.02) 4px
    );
  }

  .crt-vignette {
    background: radial-gradient(
      ellipse at center,
      transparent 60%,
      rgba($black, 0.3) 100%
    );
  }

  .crt-flicker {
    animation-duration: 12s;
  }
}

// ============================================
// INTENSITY: MEDIUM (default)
// ============================================
.crt-medium {
  // Default styles above
}

// ============================================
// INTENSITY: HEAVY
// ============================================
.crt-heavy {
  .crt-scanlines {
    background: repeating-linear-gradient(
      0deg,
      transparent 0px,
      transparent 1px,
      rgba($black, 0.08) 1px,
      rgba($black, 0.08) 2px
    );
  }

  .crt-vignette {
    background: radial-gradient(
      ellipse at center,
      transparent 40%,
      rgba($black, 0.6) 100%
    );
  }

  .crt-flicker {
    animation-duration: 5s;
  }

  // Add screen curve effect
  &::before {
    content: '';
    @include absolute-fill;
    border-radius: 50% / 5%;
    box-shadow: inset 0 0 100px rgba($black, 0.3);
  }
}

// ============================================
// CHROMATIC ABERRATION (optional effect)
// ============================================
.crt-chromatic {
  &::after {
    content: '';
    @include absolute-fill;
    background:
      linear-gradient(90deg, rgba(255, 0, 0, 0.02) 0%, transparent 3%),
      linear-gradient(-90deg, rgba(0, 255, 255, 0.02) 0%, transparent 3%);
    mix-blend-mode: screen;
  }
}
