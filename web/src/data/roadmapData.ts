/**
 * Roadmap Data - Future development items with priority and status tracking
 */

export type Priority = 'critical' | 'high' | 'medium' | 'low' | 'research';
export type Status = 'planned' | 'in-progress' | 'completed' | 'blocked' | 'deferred' | 'removed';
export type Effort = 'small' | 'medium' | 'large' | 'epic';
export type Category =
  | 'gameplay'
  | 'content'
  | 'backend'
  | 'frontend'
  | '3d'
  | 'audio'
  | 'lore'
  | 'multiplayer'
  | 'infrastructure'
  | 'accessibility';

export interface RoadmapItem {
  id: string;
  title: string;
  description: string;
  priority: Priority;
  status: Status;
  category: Category[];
  effort: Effort;
  targetVersion?: string;
  dependencies?: string[];
  details?: string[];
}

export const PRIORITY_CONFIG: Record<Priority, { label: string; color: string; order: number }> = {
  critical: { label: 'Critical', color: '#ef4444', order: 0 },
  high: { label: 'High', color: '#f97316', order: 1 },
  medium: { label: 'Medium', color: '#eab308', order: 2 },
  low: { label: 'Low', color: '#22c55e', order: 3 },
  research: { label: 'Research', color: '#a855f7', order: 4 },
};

export const STATUS_CONFIG: Record<Status, { label: string; color: string; icon: string }> = {
  planned: { label: 'Planned', color: '#6b7280', icon: 'â—‹' },
  'in-progress': { label: 'In Progress', color: '#3b82f6', icon: 'â—' },
  completed: { label: 'Completed', color: '#22c55e', icon: 'â—' },
  blocked: { label: 'Blocked', color: '#ef4444', icon: 'âœ•' },
  deferred: { label: 'Deferred', color: '#4b5563', icon: 'â—·' },
  removed: { label: 'Remove', color: '#dc2626', icon: 'ğŸ—‘' },
};

export const CATEGORY_CONFIG: Record<Category, { label: string; icon: string }> = {
  gameplay: { label: 'Gameplay', icon: 'ğŸ®' },
  content: { label: 'Content', icon: 'ğŸ“¦' },
  backend: { label: 'Backend', icon: 'âš™ï¸' },
  frontend: { label: 'Frontend', icon: 'ğŸ–¥ï¸' },
  '3d': { label: '3D', icon: 'ğŸ¨' },
  audio: { label: 'Audio', icon: 'ğŸ”Š' },
  lore: { label: 'Lore', icon: 'ğŸ“œ' },
  multiplayer: { label: 'Multiplayer', icon: 'ğŸ‘¥' },
  infrastructure: { label: 'Infrastructure', icon: 'ğŸ”§' },
  accessibility: { label: 'Accessibility', icon: 'â™¿' },
};

export const EFFORT_CONFIG: Record<Effort, { label: string; dots: number }> = {
  small: { label: 'Small', dots: 1 },
  medium: { label: 'Medium', dots: 2 },
  large: { label: 'Large', dots: 3 },
  epic: { label: 'Epic', dots: 4 },
};

export const ROADMAP_ITEMS: RoadmapItem[] = [
  // ============================================================================
  // CRITICAL PRIORITY
  // ============================================================================
  {
    id: 'crit-01',
    title: 'Fix Missing Enum Values',
    description: 'Investigation found no missing enums - TargetType.SELF exists, KitingPhase not needed',
    priority: 'critical',
    status: 'completed',
    category: ['backend'],
    effort: 'small',
    details: [
      'Investigated: CandidateType.SELF not needed - self-buffs use ABILITY with self_buff=True',
      'Investigated: KitingPhase enum does not exist and is not needed',
      'All 54 tests pass, no runtime errors found',
      'Marked as resolved/invalid on 2026-01-12',
    ],
  },
  {
    id: 'crit-02',
    title: 'Ghost Victory Behaviors',
    description: 'All victory ghost behaviors now fully implemented',
    priority: 'critical',
    status: 'completed',
    category: ['backend', 'multiplayer'],
    effort: 'medium',
    details: [
      'Beacon: Points toward stairs with directional guidance',
      'Champion: +3 HP when low health OR combat trial (elite enemy + reward)',
      'Archivist: Reveals tiles (6 radius in lore zones, 4 elsewhere)',
      'Champion trial rewards: +5 HP and +20% damage for 3 combats',
      'Completed 2026-01-12',
    ],
  },

  // ============================================================================
  // HIGH PRIORITY
  // ============================================================================
  {
    id: 'high-01',
    title: 'Database Save System',
    description: 'Persist game state to PostgreSQL with multiple save slots per account',
    priority: 'high',
    status: 'completed',
    category: ['backend'],
    effort: 'large',
    targetVersion: 'v6.5.0',
    details: [
      'GameSave model with user/slot unique constraint',
      'REST API: list, get, create/update, delete saves',
      '3 save slots per user account',
      'Progress metadata for quick display without deserializing',
      'Alembic migration for game_saves table',
      'Completed 2026-01-12',
    ],
  },
  {
    id: 'high-02',
    title: 'Complete STEALTH AI',
    description: 'Finish stealth enemy behavior including ambush and concealment mechanics',
    priority: 'high',
    status: 'completed',
    category: ['backend', 'gameplay'],
    effort: 'medium',
    details: [
      'Ambush: backstab deals 3x damage from stealth',
      'Shadow concealment: auto-hide in unlit areas',
      'Light reveals: torchlight exposes hidden enemies',
      'Detection radius: sense invisible enemies within 1 tile',
      'Shimmer effect: detected enemies show as ?',
      'Completed 2026-01-12',
    ],
  },
  {
    id: 'high-03',
    title: 'Complete ELEMENTAL AI',
    description: 'Finish elemental enemy behavior with resistance cycling and elemental attacks',
    priority: 'high',
    status: 'completed',
    category: ['backend', 'gameplay'],
    effort: 'medium',
    details: [
      'Element cycling: FIREâ†’ICEâ†’LIGHTNING every 5 turns',
      'Dynamic resistances: immune to current element',
      'Weakness system: 1.5x damage on element weakness',
      'Element-based ability selection',
      'Visual indicators: color-coded by element',
      'Completed 2026-01-12',
    ],
  },
  {
    id: 'high-04',
    title: 'Missing Artifacts',
    description: 'Implement 2 remaining artifacts (5 referenced in lore, only 3 in code)',
    priority: 'high',
    status: 'completed',
    category: ['content', 'lore'],
    effort: 'medium',
    details: [
      'Crown-Splinter: X-ray vision, costs sight range',
      'Ledger of the Unborn: summon phantom ally, costs max HP',
      'All 5 lore artifacts now implemented',
      'Completed 2026-01-12',
    ],
  },
  {
    id: 'high-05',
    title: 'Field Pulse Micro-Events',
    description: 'Add 1 micro-event per floor during Field Pulse windows',
    priority: 'high',
    status: 'completed',
    category: ['gameplay', 'lore'],
    effort: 'medium',
    details: [
      'Triggers only during pulse windows',
      'Deterministic per seed/floor',
      '1-2 narrative messages + safe effect',
      'Never blocks paths or violates hazard fairness',
      '8 floor-specific events with unique effects',
      'Each event unlocks codex evidence entry',
      'Completed 2026-01-12',
    ],
  },
  {
    id: 'high-06',
    title: 'Error Boundaries',
    description: 'Add React error boundaries for graceful failure handling',
    priority: 'high',
    status: 'completed',
    category: ['frontend'],
    effort: 'small',
    details: [
      'Wrap major components in error boundaries',
      'Display user-friendly error messages',
      'Log errors for debugging',
      'Recovery options where possible',
      'Specialized Graphics3DErrorBoundary for WebGL',
      'Root-level and component-level boundaries',
      'Completed 2026-01-12',
    ],
  },

  // ============================================================================
  // MEDIUM PRIORITY
  // ============================================================================
  {
    id: 'med-01',
    title: 'Micro-Event Codex Evidence',
    description: 'Each Field Pulse micro-event unlocks 1 codex entry for completionists',
    priority: 'medium',
    status: 'completed',
    category: ['lore', 'gameplay'],
    effort: 'small',
    dependencies: ['high-05'],
    details: [
      'Each micro-event has an evidence_* entry',
      'Discovered on first trigger',
      'Adds to sealed-page completion %',
      '8 unique narrative entries added',
      'Completed 2026-01-12',
    ],
  },
  {
    id: 'med-02',
    title: 'Extra Enemy Variety',
    description: 'Add 1 "spice" enemy per floor at low spawn weight (5-12%)',
    priority: 'medium',
    status: 'completed',
    category: ['content'],
    effort: 'medium',
    details: [
      'Added 8 floor-specific rare variants (7-8% spawn weight)',
      'F1: Shade (stealth), F2: Bile Lurker (chase)',
      'F3: Thornling (ranged), F4: Doppelganger (stealth)',
      'F5: Frost Wisp (elemental), F6: Ink Phantom (ranged)',
      'F7: Ember Sprite (elemental), F8: Prism Watcher (aggressive)',
      'Each has unique stats, elements, and encounter messages',
      'Completed 2026-01-12',
    ],
  },
  {
    id: 'med-03',
    title: 'Battle System Polish',
    description: 'Additional ability effects, arena templates, and boss phase transitions',
    priority: 'medium',
    status: 'completed',
    category: ['gameplay', '3d'],
    effort: 'medium',
    details: [
      'Camera shake on damage (intensity scales with damage amount)',
      'Hit particle burst effects (expand and fade)',
      'Attack telegraph system (pulsing danger zone overlays)',
      'Boss entity glow ring (pulsing purple aura)',
      'All effects auto-cleanup with proper disposal',
      'Completed 2026-01-12',
    ],
  },
  {
    id: 'med-04',
    title: 'Performance Optimization',
    description: 'Canvas texture caching and reduced re-renders for smoother gameplay',
    priority: 'medium',
    status: 'completed',
    category: ['frontend', '3d'],
    effort: 'medium',
    details: [
      'Shared geometry cache for floor/wall/highlight/telegraph planes',
      'Canvas pooling for damage numbers (pool size: 10)',
      'Eliminates 50-200+ geometry allocations per battle',
      'Only dispose materials, not shared geometries on cleanup',
      '~1-2MB memory savings over extended play',
      'Completed 2026-01-12',
    ],
  },
  {
    id: 'med-05',
    title: 'Keyboard Navigation',
    description: 'Full keyboard support for all menus and inventory management',
    priority: 'medium',
    status: 'completed',
    category: ['accessibility', 'frontend'],
    effort: 'small',
    details: [
      'Reusable useKeyboardNavigation hook',
      'Arrow key navigation in race/class grids',
      'Home/End to jump to first/last item',
      'ARIA attributes for screen readers',
      'Focus indicators with pulse animation',
      'Completed 2026-01-12',
    ],
  },
  {
    id: 'med-06',
    title: 'Screen Reader Labels',
    description: 'ARIA labels for game elements to support screen reader users',
    priority: 'medium',
    status: 'completed',
    category: ['accessibility', 'frontend'],
    effort: 'small',
    details: [
      'CharacterHUD: race, class, health, abilities with aria-labels',
      'StatusHUD: field pulse, vows, artifacts with aria-labels',
      'GameAnnouncer: aria-live region for game events',
      'Play controls: aria-describedby for view toggles',
      'Completed 2026-01-12',
    ],
  },
  {
    id: 'med-07',
    title: 'Secret Ending Hooks',
    description: 'Track conditions for secret ending without revealing requirements',
    priority: 'medium',
    status: 'completed',
    category: ['gameplay', 'lore'],
    effort: 'medium',
    details: [
      'SecretFlag enum: 18 candidate conditions (meaning hidden)',
      'SecretProgress tracker with per-floor/warden tracking',
      'Integrated into CompletionLedger with serialization',
      'evaluate_end_of_run() checks completion conditions',
      'SECRET_ENDING_ENABLED never set (future content)',
      'Completed 2026-01-12',
    ],
  },
  {
    id: 'med-08',
    title: 'Boss Documentation Sync',
    description: 'Update documentation to match actual implemented boss roster',
    priority: 'medium',
    status: 'completed',
    category: ['infrastructure'],
    effort: 'small',
    details: [
      'Fixed outdated Lich Lord reference â†’ The Regent',
      'Reordered wardens by floor number (1-8)',
      'All 8 bosses documented with floor assignments',
      'LORE_COMPENDIUM.md now matches constants.py',
      'Completed 2026-01-12',
    ],
  },

  // ============================================================================
  // LOW PRIORITY
  // ============================================================================
  {
    id: 'low-01',
    title: 'ICE Slide Mechanic',
    description: 'Floor 5 ice lanes cause sliding movement (fairness-tested)',
    priority: 'low',
    status: 'completed',
    category: ['gameplay'],
    effort: 'medium',
    details: [
      'Ice tiles on Floor 5 now cause sliding momentum',
      'Player slides in movement direction until hitting wall, enemy, or non-ice',
      'Wall collision: message "You slam into the wall!"',
      'Enemy collision: 2 damage to both parties, stops sliding',
      'Traps and items checked at each slide position',
      'Max 20 slides to prevent infinite loops (safety cap)',
    ],
  },
  {
    id: 'low-02',
    title: 'Floor Diorama 3D',
    description: 'Three.js cross-section visualization showing all 8 floors for Home page',
    priority: 'low',
    status: 'completed',
    category: ['frontend', '3d'],
    effort: 'large',
    details: [
      '8 stacked platform layers with biome-specific colors',
      'Floating boss symbols above each floor with glow effects',
      'Slow camera rotation around the diorama',
      'Parallax tilt effect responds to scroll position',
      'Decorative pillars and connecting beams',
      'Point lights with subtle pulse animation',
    ],
  },
  {
    id: 'low-03',
    title: 'Character Preview 3D',
    description: '3D character preview in character creation screen',
    priority: 'low',
    status: 'completed',
    category: ['frontend', '3d'],
    effort: 'medium',
    details: [
      'Race-specific body proportions (Dwarf shorter, Elf taller, Orc bulkier)',
      'Class-specific equipment (sword/shield, staff, daggers, holy symbol)',
      'Race features (Elf ears, Orc tusks, Dwarf beard)',
      'Animated idle pose with bob and sway',
      'Drag/touch to rotate character',
      'Glow aura matching class color',
    ],
  },
  {
    id: 'low-04',
    title: 'Achievement System',
    description: 'Track and display player achievements with rarity tiers',
    priority: 'low',
    status: 'completed',
    category: ['gameplay', 'multiplayer'],
    effort: 'large',
    details: [
      '33 achievements defined in server/app/config/achievements.py',
      '4 rarity tiers: Common, Rare, Epic, Legendary',
      '5 categories: Combat, Progression, Efficiency, Collection, Special',
      'Database: user_achievement model with migrations',
      'API: /api/achievements endpoints',
      'Frontend: Achievements.tsx page, AchievementToast.tsx component',
      'Already implemented (found in codebase)',
    ],
  },
  {
    id: 'low-05',
    title: 'Daily Challenges',
    description: 'Seeded daily runs with dedicated leaderboard',
    priority: 'low',
    status: 'completed',
    category: ['gameplay', 'multiplayer'],
    effort: 'large',
    details: [
      'Backend API: DailyChallenge and DailyChallengeResult models',
      'Deterministic seed generation from date',
      'Daily leaderboard with rank tracking',
      'Streak tracking per user (current, best)',
      'One attempt per day per user',
      'API endpoints: /api/daily, /api/daily/leaderboard, /api/daily/stats, /api/daily/streaks',
    ],
  },
  {
    id: 'low-06',
    title: 'Spectator Mode',
    description: 'Watch other players\' runs in real-time',
    priority: 'low',
    status: 'completed',
    category: ['multiplayer'],
    effort: 'large',
    details: [
      'Frontend: Spectate.tsx page with active games list',
      'WebSocket: Real-time game state streaming via getSpectateWsUrl',
      'Backend: spectatorApi endpoints, game_session.py support',
      'GameTerminal: isSpectator prop for read-only mode',
      'Core features implemented (may need polish)',
    ],
  },

  // ============================================================================
  // HIGH PRIORITY - UPCOMING
  // ============================================================================
  {
    id: 'high-07',
    title: 'Co-op Multiplayer Mode',
    description: '2-player cooperative dungeon crawling with shared progression',
    priority: 'high',
    status: 'planned',
    category: ['multiplayer', 'gameplay'],
    effort: 'epic',
    targetVersion: 'v7.0',
    details: [
      'WebSocket-based real-time synchronization',
      'Shared dungeon exploration with split visibility',
      'Coordinated combat with combined abilities',
      'Loot distribution system (need/greed/pass)',
      'Revival mechanic for downed players',
      'Scaling difficulty based on party size',
    ],
  },
  {
    id: 'high-08',
    title: 'PvP Arena Mode',
    description: 'Competitive player vs player battles with matchmaking',
    priority: 'high',
    status: 'planned',
    category: ['multiplayer', 'gameplay'],
    effort: 'epic',
    targetVersion: 'v7.0',
    details: [
      '1v1 arena battles with balanced starting loadouts',
      'ELO-based matchmaking system',
      'Ranked seasons with rewards',
      'Spectator mode for matches',
      'Custom arena templates',
      'Anti-cheat measures',
    ],
  },
  {
    id: 'high-09',
    title: 'New Game+ Mode',
    description: 'Replay the game with increased difficulty and retained abilities',
    priority: 'high',
    status: 'planned',
    category: ['gameplay'],
    effort: 'large',
    targetVersion: 'v6.6',
    details: [
      'Unlock after first victory',
      'Keep selected abilities and artifacts',
      'Enemy HP and damage scaling (+50% per NG+ level)',
      'New enemy variants exclusive to NG+',
      'Additional secret ending conditions',
      'NG+ indicators on leaderboard',
    ],
  },
  {
    id: 'high-10',
    title: 'Boss Rush Mode',
    description: 'Fight all 8 floor wardens in sequence with limited resources',
    priority: 'high',
    status: 'planned',
    category: ['gameplay', 'content'],
    effort: 'medium',
    targetVersion: 'v6.6',
    details: [
      'All bosses back-to-back with brief rest periods',
      'Limited healing between fights',
      'Timed mode for speedrun leaderboard',
      'Unlockable after defeating all bosses once',
      'Unique rewards for completion',
    ],
  },
  {
    id: 'high-11',
    title: 'Run History & Statistics',
    description: 'Comprehensive tracking of all past runs with detailed analytics',
    priority: 'high',
    status: 'planned',
    category: ['backend', 'frontend'],
    effort: 'large',
    targetVersion: 'v6.6',
    details: [
      'Full run history stored in database',
      'Death location heatmaps',
      'Most used abilities/items statistics',
      'Time-to-floor graphs',
      'Personal best tracking per metric',
      'Exportable run summaries',
    ],
  },
  {
    id: 'high-12',
    title: 'Global Leaderboards',
    description: 'Ranked leaderboards for various game modes and metrics',
    priority: 'high',
    status: 'planned',
    category: ['multiplayer', 'backend'],
    effort: 'medium',
    targetVersion: 'v6.6',
    details: [
      'Score-based rankings',
      'Speedrun categories (any%, all bosses, 100%)',
      'Weekly/monthly/all-time periods',
      'Friends-only leaderboard filter',
      'Anti-cheat validation',
      'Replay verification for top scores',
    ],
  },

  // ============================================================================
  // MEDIUM PRIORITY - UPCOMING
  // ============================================================================
  {
    id: 'med-09',
    title: 'Necromancer Class',
    description: 'New playable class focused on summoning and life-drain abilities',
    priority: 'medium',
    status: 'planned',
    category: ['content', 'gameplay'],
    effort: 'large',
    targetVersion: 'v6.7',
    details: [
      'Summon undead minions that fight alongside player',
      'Life drain abilities that heal when dealing damage',
      'Corpse explosion mechanic using defeated enemies',
      'Bone armor defensive ability',
      'Unique starting equipment and stats',
      'Class-specific lore entries',
    ],
  },
  {
    id: 'med-10',
    title: 'Monk Class',
    description: 'New playable class with martial arts and chi-based abilities',
    priority: 'medium',
    status: 'planned',
    category: ['content', 'gameplay'],
    effort: 'large',
    targetVersion: 'v6.7',
    details: [
      'Combo system that chains attacks',
      'Chi resource that builds during combat',
      'Stunning palm strike ability',
      'Evasion-focused defensive style',
      'Inner peace passive healing',
      'Unarmed combat specialization',
    ],
  },
  {
    id: 'med-11',
    title: 'Bard Class',
    description: 'New playable class with music-based buffs and debuffs',
    priority: 'medium',
    status: 'planned',
    category: ['content', 'gameplay', 'audio'],
    effort: 'large',
    targetVersion: 'v6.7',
    details: [
      'Song abilities with area-of-effect',
      'Inspire allies (co-op) or self-buff',
      'Discordant note to debuff enemies',
      'Charm ability to turn enemies',
      'Audio-reactive ability effects',
      'Instrument equipment slot',
    ],
  },
  {
    id: 'med-12',
    title: 'Crafting System',
    description: 'Combine items and materials to create enhanced equipment',
    priority: 'medium',
    status: 'planned',
    category: ['gameplay', 'content'],
    effort: 'large',
    targetVersion: 'v6.8',
    details: [
      'Material drops from enemies and exploration',
      'Crafting recipes discovered through lore',
      'Workbench locations on each floor',
      'Equipment enhancement system',
      'Consumable crafting (potions, scrolls)',
      'Rare legendary recipes',
    ],
  },
  {
    id: 'med-13',
    title: 'Equipment Enchantments',
    description: 'Add magical properties to weapons and armor',
    priority: 'medium',
    status: 'planned',
    category: ['gameplay', 'content'],
    effort: 'medium',
    dependencies: ['med-12'],
    targetVersion: 'v6.8',
    details: [
      'Elemental damage enchantments (fire, ice, lightning)',
      'Defensive enchantments (resistance, thorns)',
      'Utility enchantments (speed, vision)',
      'Enchantment scrolls as loot',
      'Risk of failure on higher tiers',
      'Visual effects on enchanted gear',
    ],
  },
  {
    id: 'med-14',
    title: 'Pet/Companion System',
    description: 'Recruit and deploy helper creatures during runs',
    priority: 'medium',
    status: 'planned',
    category: ['gameplay', 'content'],
    effort: 'large',
    targetVersion: 'v6.8',
    details: [
      'Findable pet eggs on dungeon floors',
      'Pet types: attack, defense, support',
      'Pet leveling and evolution',
      'Limited pet slots (1-2 active)',
      'Pet abilities complement player class',
      'Permanent pet collection across runs',
    ],
  },
  {
    id: 'med-15',
    title: 'Expanded Lore Codex',
    description: '50+ new lore entries covering world history and characters',
    priority: 'medium',
    status: 'planned',
    category: ['lore', 'content'],
    effort: 'medium',
    targetVersion: 'v6.7',
    details: [
      'Pre-fall kingdom history',
      'Each boss warden backstory',
      'Field anomaly scientific theories',
      'Survivor accounts and journals',
      'Hidden civilization references',
      'Cross-references between entries',
    ],
  },
  {
    id: 'med-16',
    title: 'Side Quests',
    description: 'Optional objectives with unique rewards discovered during exploration',
    priority: 'medium',
    status: 'planned',
    category: ['gameplay', 'content'],
    effort: 'large',
    targetVersion: 'v6.8',
    details: [
      'NPC quest givers (ghost NPCs)',
      'Fetch quests with rare items',
      'Bounty hunts for elite enemies',
      'Exploration challenges',
      'Time-limited objectives',
      'Unique quest rewards not found elsewhere',
    ],
  },
  {
    id: 'med-17',
    title: 'Environmental Puzzles',
    description: 'Logic puzzles that unlock secret areas and treasure',
    priority: 'medium',
    status: 'planned',
    category: ['gameplay'],
    effort: 'medium',
    targetVersion: 'v6.8',
    details: [
      'Pressure plate sequences',
      'Torch lighting puzzles',
      'Symbol matching doors',
      'Water flow redirection',
      'Mirror reflection puzzles',
      'Rewards scale with puzzle difficulty',
    ],
  },
  {
    id: 'med-18',
    title: 'Secret Rooms',
    description: 'Hidden chambers with rare loot requiring discovery',
    priority: 'medium',
    status: 'planned',
    category: ['gameplay', 'content'],
    effort: 'medium',
    targetVersion: 'v6.7',
    details: [
      'Destructible walls hiding entrances',
      'Perception checks to reveal',
      'Guaranteed rare/legendary loot',
      'Trap-heavy interiors',
      'Lore entries exclusive to secret rooms',
      '1-2 secret rooms per floor',
    ],
  },
  {
    id: 'med-19',
    title: 'Skill Tree Progression',
    description: 'Persistent character upgrades that carry across runs',
    priority: 'medium',
    status: 'planned',
    category: ['gameplay'],
    effort: 'large',
    targetVersion: 'v6.9',
    details: [
      'Unlock points earned from runs',
      'Three branches per class',
      'Passive bonuses and new abilities',
      'Respec option with cost',
      'Visual skill tree UI',
      'Milestone unlocks at tree completion',
    ],
  },
  {
    id: 'med-20',
    title: 'Weather System',
    description: 'Dynamic weather affecting visibility and gameplay',
    priority: 'medium',
    status: 'planned',
    category: ['gameplay', '3d'],
    effort: 'medium',
    targetVersion: 'v6.9',
    details: [
      'Rain reduces visibility',
      'Fog hides enemies at distance',
      'Storms cause random lightning strikes',
      'Biome-specific weather (snow, sandstorms)',
      '3D particle effects for weather',
      'Weather affects some abilities',
    ],
  },

  // ============================================================================
  // LOW PRIORITY - UPCOMING
  // ============================================================================
  {
    id: 'low-07',
    title: 'Controller Support',
    description: 'Full gamepad support for console-style play',
    priority: 'low',
    status: 'planned',
    category: ['accessibility', 'frontend'],
    effort: 'medium',
    details: [
      'Xbox/PlayStation controller mapping',
      'Radial menus for ability selection',
      'Vibration feedback for events',
      'On-screen button prompts',
      'Customizable button layouts',
    ],
  },
  {
    id: 'low-08',
    title: 'Colorblind Modes',
    description: 'Alternative color palettes for color vision deficiencies',
    priority: 'low',
    status: 'planned',
    category: ['accessibility', 'frontend'],
    effort: 'small',
    details: [
      'Protanopia (red-weak) mode',
      'Deuteranopia (green-weak) mode',
      'Tritanopia (blue-weak) mode',
      'High contrast mode',
      'Symbol-based differentiation',
    ],
  },
  {
    id: 'low-09',
    title: 'Localization (i18n)',
    description: 'Multi-language support for global audience',
    priority: 'low',
    status: 'planned',
    category: ['frontend', 'infrastructure'],
    effort: 'large',
    details: [
      'String extraction and key mapping',
      'Initial languages: EN, ES, FR, DE, JP',
      'RTL support for Arabic/Hebrew',
      'Lore text translation',
      'Community translation portal',
    ],
  },
  {
    id: 'low-10',
    title: 'Replay System',
    description: 'Record and playback full runs for review',
    priority: 'low',
    status: 'planned',
    category: ['frontend', 'multiplayer'],
    effort: 'large',
    details: [
      'Input recording for deterministic replay',
      'Playback speed controls',
      'Share replay files',
      'Commentary/annotation support',
      'Export to video format',
    ],
  },
  {
    id: 'low-11',
    title: 'Screenshot Mode',
    description: 'Cinematic camera controls for capturing screenshots',
    priority: 'low',
    status: 'planned',
    category: ['frontend', '3d'],
    effort: 'small',
    details: [
      'Free camera movement',
      'Hide UI elements',
      'Depth of field effects',
      'Lighting adjustments',
      'Direct save to gallery',
    ],
  },
  {
    id: 'low-12',
    title: 'Custom Portraits',
    description: 'Upload custom character portraits for personalization',
    priority: 'low',
    status: 'planned',
    category: ['frontend'],
    effort: 'small',
    details: [
      'Image upload with cropping',
      'Portrait gallery management',
      'Size/format validation',
      'Default portraits per race/class',
      'Portrait visible in multiplayer',
    ],
  },
  {
    id: 'low-13',
    title: 'Steam Integration',
    description: 'Steam achievements, cloud saves, and workshop support',
    priority: 'low',
    status: 'planned',
    category: ['infrastructure', 'multiplayer'],
    effort: 'large',
    details: [
      'Steamworks SDK integration',
      'Steam achievement sync',
      'Steam cloud save support',
      'Steam Workshop for mods',
      'Steam leaderboards',
      'Trading cards',
    ],
  },
  {
    id: 'low-14',
    title: 'Mod Support',
    description: 'Enable community-created content and modifications',
    priority: 'low',
    status: 'planned',
    category: ['infrastructure'],
    effort: 'epic',
    details: [
      'Mod loading system',
      'Custom enemy definitions',
      'Custom item definitions',
      'Custom floor generators',
      'Mod manager UI',
      'Mod compatibility checking',
    ],
  },
  {
    id: 'low-15',
    title: 'Level Editor',
    description: 'Create and share custom dungeon floors',
    priority: 'low',
    status: 'planned',
    category: ['frontend', 'infrastructure'],
    effort: 'epic',
    details: [
      'Drag-and-drop tile placement',
      'Enemy and item placement',
      'Custom room templates',
      'Play-test from editor',
      'Share via code or file',
      'Featured community levels',
    ],
  },
  {
    id: 'low-16',
    title: 'Mobile Native App',
    description: 'Native iOS/Android app with offline support',
    priority: 'low',
    status: 'planned',
    category: ['frontend', 'infrastructure'],
    effort: 'epic',
    details: [
      'React Native or Capacitor wrapper',
      'Offline single-player mode',
      'Push notifications for daily challenges',
      'App store deployment',
      'Mobile-optimized UI',
      'Cross-platform save sync',
    ],
  },
  {
    id: 'low-17',
    title: 'Expanded Trap Variety',
    description: '10+ new trap types with unique mechanics',
    priority: 'low',
    status: 'planned',
    category: ['content', 'gameplay'],
    effort: 'medium',
    details: [
      'Teleport trap (random relocation)',
      'Alarm trap (summons enemies)',
      'Confusion trap (reversed controls)',
      'Slow trap (movement penalty)',
      'Mimic chest trap (enemy disguise)',
      'Each trap has detection and disarm mechanics',
    ],
  },
  {
    id: 'low-18',
    title: 'Additional Biomes',
    description: 'New floor themes beyond the current 8',
    priority: 'low',
    status: 'planned',
    category: ['content', '3d'],
    effort: 'epic',
    details: [
      'Underwater Temple (swimming mechanics)',
      'Sky Fortress (wind/fall hazards)',
      'Volcanic Core (eruption events)',
      'Crystal Caves (reflection puzzles)',
      'Living Dungeon (shifting walls)',
      'Each biome has unique enemies and hazards',
    ],
  },

  // ============================================================================
  // RESEARCH PRIORITY
  // ============================================================================
  {
    id: 'res-01',
    title: '3D Asset Pipeline',
    description: 'CLI workflow for AI-generated 3D models using Meshy, Tripo, or Rodin APIs',
    priority: 'research',
    status: 'planned',
    category: ['3d', 'infrastructure'],
    effort: 'epic',
    details: [
      'Research available AI 3D generation APIs',
      'Design CLI workflow for asset generation',
      'Integration with existing Three.js renderer',
      'Replace procedural geometry with actual 3D assets',
    ],
  },
  {
    id: 'res-02',
    title: 'Mobile Performance',
    description: 'Profile and optimize game for mobile devices',
    priority: 'research',
    status: 'planned',
    category: ['frontend', 'infrastructure'],
    effort: 'large',
    details: [
      'Profile on actual mobile devices',
      'Identify performance bottlenecks',
      'Reduce Three.js complexity on mobile',
      'Test touch controls responsiveness',
    ],
  },
  {
    id: 'res-03',
    title: 'WebGPU Migration',
    description: 'Future-proof 3D rendering by migrating to WebGPU',
    priority: 'research',
    status: 'planned',
    category: ['3d'],
    effort: 'epic',
    details: [
      'WebGPU browser support assessment',
      'Three.js WebGPU renderer evaluation',
      'Performance comparison vs WebGL',
      'Fallback strategy for unsupported browsers',
    ],
  },
  {
    id: 'res-04',
    title: 'Procedural Music',
    description: 'Generate music that responds dynamically to gameplay',
    priority: 'research',
    status: 'planned',
    category: ['audio'],
    effort: 'large',
    details: [
      'Research procedural music generation',
      'Intensity based on combat/exploration',
      'Biome-specific instrumentation',
      'Smooth transitions between states',
    ],
  },
  {
    id: 'res-05',
    title: 'AI Director',
    description: 'Dynamic difficulty adjustment based on player performance',
    priority: 'research',
    status: 'planned',
    category: ['gameplay', 'backend'],
    effort: 'epic',
    details: [
      'Track player skill metrics in real-time',
      'Adjust spawn rates and enemy difficulty',
      'Balance challenge vs frustration',
      'Maintain fairness for competitive modes',
      'Optional toggle for purists',
    ],
  },
  {
    id: 'res-06',
    title: 'Voice Acting',
    description: 'Voiced narration for lore entries and boss encounters',
    priority: 'research',
    status: 'planned',
    category: ['audio', 'lore'],
    effort: 'epic',
    details: [
      'Narrator for lore codex entries',
      'Boss taunt voice lines',
      'NPC dialogue (side quests)',
      'Professional voice talent or AI TTS',
      'Subtitles and audio options',
    ],
  },
  {
    id: 'res-07',
    title: 'Twitch Integration',
    description: 'Stream viewer interaction with gameplay',
    priority: 'research',
    status: 'planned',
    category: ['multiplayer', 'infrastructure'],
    effort: 'large',
    details: [
      'Chat commands affect gameplay',
      'Viewer voting on events',
      'Channel point rewards',
      'Overlay extension',
      'Streamer dashboard',
    ],
  },
  {
    id: 'res-08',
    title: 'VR Mode',
    description: 'Virtual reality support for immersive dungeon crawling',
    priority: 'research',
    status: 'planned',
    category: ['3d', 'frontend'],
    effort: 'epic',
    details: [
      'WebXR API integration',
      'Hand tracking for interactions',
      'Comfort options (teleport vs smooth)',
      'VR-specific UI design',
      'Performance optimization for 90fps',
    ],
  },
];

// Helper functions
export function getItemsByPriority(priority: Priority): RoadmapItem[] {
  return ROADMAP_ITEMS.filter((item) => item.priority === priority);
}

export function getItemsByStatus(status: Status): RoadmapItem[] {
  return ROADMAP_ITEMS.filter((item) => item.status === status);
}

export function getItemsByCategory(category: Category): RoadmapItem[] {
  return ROADMAP_ITEMS.filter((item) => item.category.includes(category));
}

export function getCompletionStats() {
  const total = ROADMAP_ITEMS.length;
  const completed = ROADMAP_ITEMS.filter((item) => item.status === 'completed').length;
  const inProgress = ROADMAP_ITEMS.filter((item) => item.status === 'in-progress').length;
  return { total, completed, inProgress, percentage: Math.round((completed / total) * 100) };
}

export function getPriorityStats() {
  return {
    critical: getItemsByPriority('critical').length,
    high: getItemsByPriority('high').length,
    medium: getItemsByPriority('medium').length,
    low: getItemsByPriority('low').length,
    research: getItemsByPriority('research').length,
  };
}
