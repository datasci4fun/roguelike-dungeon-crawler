// ============================================
// SCENE BACKGROUNDS
// ============================================

@use 'variables' as *;
@use 'mixins' as *;

// Base scene background
.scene-background {
  @include absolute-fill;
  overflow: hidden;
}

// Background layers base
.bg-layer {
  @include bg-layer-base;
}

.bg-far {
  transform: scale(1.1);
  animation: parallaxFar $parallax-slow ease-in-out infinite alternate;
}

.bg-mid {
  animation: parallaxMid $parallax-mid ease-in-out infinite alternate;
}

.bg-near {
  animation: parallaxNear $parallax-fast ease-in-out infinite alternate;
}

// ============================================
// SCENE: TITLE
// ============================================
.scene-title {
  .scene-background {
    background: radial-gradient(
      ellipse at 50% 30%,
      $dark-purple 0%,
      #0a0a12 60%,
      $black 100%
    );
  }

  .bg-far {
    background:
      radial-gradient(ellipse at 30% 20%, rgba($gold, 0.03) 0%, transparent 30%),
      radial-gradient(ellipse at 70% 30%, rgba($gold, 0.02) 0%, transparent 25%);
  }

  // NEW: Subtle mystical runes in background
  .bg-mid {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Ctext x='50' y='50' font-size='20' fill='rgba(255,215,0,0.03)' text-anchor='middle' dominant-baseline='middle'%3E%E2%9C%A6%3C/text%3E%3C/svg%3E");
    background-size: 200px 200px;
    animation: runeGlow 8s ease-in-out infinite;
  }
}

// ============================================
// SCENE: KINGDOM
// ============================================
.scene-kingdom {
  .scene-background {
    @include scene-gradient(
      $dark-blue 0%,
      #1a2a48 30%,
      #2a3a58 50%,
      #1a2a48 70%,
      $dark-blue 100%
    );
  }

  .bg-far {
    // Stars and moon glow
    background:
      radial-gradient(1px 1px at 20% 30%, rgba(255, 255, 255, 0.8), transparent),
      radial-gradient(1px 1px at 40% 20%, rgba(255, 255, 255, 0.6), transparent),
      radial-gradient(1px 1px at 60% 40%, rgba(255, 255, 255, 0.7), transparent),
      radial-gradient(1px 1px at 80% 25%, rgba(255, 255, 255, 0.5), transparent),
      radial-gradient(2px 2px at 50% 15%, rgba(255, 255, 255, 0.9), transparent),
      radial-gradient(1px 1px at 30% 45%, rgba(255, 255, 255, 0.4), transparent),
      radial-gradient(1px 1px at 70% 35%, rgba(255, 255, 255, 0.6), transparent),
      radial-gradient(1px 1px at 15% 50%, rgba(255, 255, 255, 0.5), transparent),
      radial-gradient(1px 1px at 85% 45%, rgba(255, 255, 255, 0.4), transparent),
      // Moon glow
      radial-gradient(ellipse at 80% 20%, rgba(200, 220, 255, 0.15) 0%, transparent 40%);
  }

  .bg-mid {
    // Mountain silhouettes
    background:
      linear-gradient(165deg, transparent 45%, #1a2a48 45.5%, #1a2a48 100%),
      linear-gradient(195deg, transparent 50%, #152238 50.5%, #152238 100%),
      linear-gradient(175deg, transparent 55%, #0f1a28 55.5%, #0f1a28 100%);
  }

  .bg-near {
    // Castle silhouette
    background: linear-gradient(to bottom, transparent 60%, #0a0f18 60%);
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 40'%3E%3Cpath d='M0,40 L0,25 L5,25 L5,20 L8,20 L8,25 L15,25 L15,15 L18,10 L21,15 L21,25 L30,25 L30,20 L35,18 L40,20 L40,25 L45,25 L45,12 L48,8 L51,12 L51,25 L60,25 L60,22 L65,20 L70,22 L70,25 L80,25 L80,18 L85,15 L90,18 L90,25 L95,25 L95,20 L100,20 L100,40 Z' fill='black'/%3E%3C/svg%3E");
    mask-size: 100% 100%;
    mask-position: bottom;
    mask-repeat: no-repeat;
    opacity: 0.9;
  }
}

// ============================================
// SCENE: DARKNESS
// ============================================
.scene-darkness {
  .scene-background {
    background: radial-gradient(
      ellipse at 50% 50%,
      #1a0a1a 0%,
      #0a0508 50%,
      $black 100%
    );
    animation: darknessFlicker 0.5s ease-in-out infinite;
  }

  .bg-far {
    background: radial-gradient(
      ellipse at 50% 40%,
      rgba(80, 0, 40, 0.3) 0%,
      transparent 60%
    );
    animation: darknessPulse 3s ease-in-out infinite;
  }

  .bg-mid {
    // Shadowy tendrils
    background:
      radial-gradient(ellipse at 30% 60%, rgba(0, 0, 0, 0.8) 0%, transparent 40%),
      radial-gradient(ellipse at 70% 50%, rgba(0, 0, 0, 0.7) 0%, transparent 35%),
      radial-gradient(ellipse at 50% 70%, rgba(0, 0, 0, 0.9) 0%, transparent 45%);
    animation: shadowsMove 8s ease-in-out infinite;
  }

  .bg-near {
    // Red cracks/fissures
    background:
      linear-gradient(45deg, transparent 48%, rgba($blood-red, 0.3) 49%, rgba($blood-red, 0.3) 51%, transparent 52%),
      linear-gradient(-30deg, transparent 45%, rgba(150, 0, 30, 0.2) 46%, rgba(150, 0, 30, 0.2) 54%, transparent 55%),
      linear-gradient(75deg, transparent 47%, rgba(180, 0, 40, 0.15) 48%, rgba(180, 0, 40, 0.15) 52%, transparent 53%);
    animation: cracksGlow 2s ease-in-out infinite alternate;
  }
}

// ============================================
// SCENE: UNDERGROUND
// ============================================
.scene-underground {
  .scene-background {
    @include scene-gradient(
      $near-black 0%,
      #0f0f18 30%,
      #141420 60%,
      #0a0a10 100%
    );
  }

  .bg-far {
    // Torch glow spots
    background:
      radial-gradient(ellipse at 20% 50%, $torch-glow 0%, transparent 30%),
      radial-gradient(ellipse at 80% 40%, rgba(255, 150, 50, 0.08) 0%, transparent 25%),
      radial-gradient(ellipse at 50% 60%, rgba(255, 150, 50, 0.05) 0%, transparent 35%);
    animation: torchFlicker 0.3s ease-in-out infinite;
  }

  .bg-mid {
    // Stone pillars/columns
    background:
      linear-gradient(to bottom, transparent 30%, #0f0f18 30%, #0f0f18 100%),
      repeating-linear-gradient(
        90deg,
        transparent 0px, transparent 80px,
        #0a0a12 80px, #0a0a12 100px,
        transparent 100px, transparent 180px
      );
    opacity: 0.7;
  }

  .bg-near {
    // Arch frame
    background: radial-gradient(
      ellipse at 50% 100%,
      transparent 40%,
      #050508 60%
    );
  }
}

// ============================================
// SCENE: DEPTHS
// ============================================
.scene-depths {
  .scene-background {
    @include scene-gradient(
      #050508 0%,
      #080810 50%,
      #0a0a12 100%
    );
  }

  .bg-far {
    // Distant glowing eyes
    background:
      radial-gradient(2px 2px at 25% 45%, $eye-red, transparent 3px),
      radial-gradient(2px 2px at 27% 45%, $eye-red, transparent 3px),
      radial-gradient(2px 2px at 75% 55%, rgba(200, 150, 50, 0.6), transparent 3px),
      radial-gradient(2px 2px at 77% 55%, rgba(200, 150, 50, 0.6), transparent 3px),
      // Additional eyes for menace
      radial-gradient(2px 2px at 15% 65%, rgba(150, 50, 50, 0.5), transparent 3px),
      radial-gradient(2px 2px at 17% 65%, rgba(150, 50, 50, 0.5), transparent 3px);
    animation: eyesBlink 4s ease-in-out infinite;
  }

  .bg-mid {
    // Fog/mist
    background:
      linear-gradient(to top, rgba(20, 20, 30, 0.8) 0%, transparent 40%),
      radial-gradient(ellipse at 30% 80%, rgba(30, 30, 40, 0.6) 0%, transparent 50%),
      radial-gradient(ellipse at 70% 70%, rgba(25, 25, 35, 0.5) 0%, transparent 45%);
    animation: fogDrift 12s ease-in-out infinite alternate;
  }
}

// ============================================
// SCENE: ENTRANCE
// ============================================
.scene-entrance {
  .scene-background {
    @include scene-gradient(
      #1a1a28 0%,
      #12121a 40%,
      #0a0a10 70%,
      $black 100%
    );
  }

  .bg-far {
    // Dim sky/horizon
    background: linear-gradient(
      to bottom,
      rgba(40, 35, 50, 0.3) 0%,
      transparent 40%
    );
  }

  .bg-mid {
    // Rocky hillside silhouette
    background:
      linear-gradient(170deg, transparent 50%, #0f0f18 50.5%),
      linear-gradient(190deg, transparent 55%, #0a0a12 55.5%);
  }

  .bg-near {
    // Cave entrance frame - dark arch
    background: radial-gradient(
      ellipse 60% 80% at 50% 100%,
      $black 0%,
      $black 30%,
      transparent 31%
    );
    // Glow from within
    box-shadow: inset 0 -50px 100px rgba(255, 100, 30, 0.1);

    &::after {
      content: '';
      position: absolute;
      bottom: 10%;
      left: 50%;
      transform: translateX(-50%);
      width: 30%;
      height: 40%;
      background: radial-gradient(
        ellipse at 50% 100%,
        rgba(255, 100, 30, 0.15) 0%,
        transparent 70%
      );
      animation: entranceGlow 3s ease-in-out infinite alternate;
    }
  }
}

// ============================================
// NEW SCENE: AWAKENING (extra dramatic scene)
// ============================================
.scene-awakening {
  .scene-background {
    background: radial-gradient(
      ellipse at 50% 60%,
      #0a0a1a 0%,
      $black 100%
    );
  }

  .bg-far {
    // Ethereal light from above
    background: radial-gradient(
      ellipse at 50% 0%,
      rgba($gold, 0.1) 0%,
      transparent 60%
    );
    animation: breathe 4s ease-in-out infinite;
  }

  .bg-mid {
    // Mystical symbols
    background-image:
      radial-gradient(circle at 30% 40%, rgba($gold, 0.05) 0%, transparent 10%),
      radial-gradient(circle at 70% 60%, rgba($gold, 0.05) 0%, transparent 10%),
      radial-gradient(circle at 50% 30%, rgba($gold, 0.03) 0%, transparent 15%);
    animation: runeGlow 6s ease-in-out infinite;
  }

  .bg-near {
    // Dramatic vignette
    background: radial-gradient(
      ellipse at 50% 50%,
      transparent 20%,
      rgba($black, 0.8) 80%
    );
  }
}
